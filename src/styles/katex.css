/* KaTeX display mode styles */
.katex-display {
  display: block;
  margin: 1em 0;
  text-align: center;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 0.5em 0;
}

/* KaTeX inline mode styles */
.katex {
  font-size: 1.1em;
  line-height: 1.2;
  white-space: normal;
  text-indent: 0;
}

/* Ensure proper spacing for block math */
.math.math-display {
  display: block;
  margin: 1em 0;
  text-align: center;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 0.5em 0;
}

/* Ensure proper spacing for inline math */
.math.math-inline {
  display: inline;
  margin: 0 0.15em;
}

/* Ensure proper alignment in RTL context */
[dir="rtl"] .katex {
  direction: ltr;
  text-align: left;
}

/* Ensure formulas don't overflow on mobile */
@media (max-width: 640px) {
  .katex-display > .katex {
    max-width: 100%;
    font-size: 0.95em;
  }
  
  .katex-display {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
  }
}

/* Add some visual distinction to display math */
.katex-display {
  background-color: rgba(248, 249, 250, 0.5);
  border-radius: 4px;
}

/* Ensure proper vertical alignment */
.katex {
  vertical-align: middle;
}

/* Ensure proper spacing around operators */
.katex .mbin {
  margin: 0 0.2222222222em;
}

.katex .mrel {
  margin: 0 0.2777777778em;
}

/* Ensure proper fraction sizing in display mode */
.katex-display .mfrac {
  font-size: 1.1em;
}
